<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Sophie — AI Sales Intelligence Agent | Mantyl</title>
<meta name="description" content="Talk to Sophie, your AI sales intelligence agent. Upload context, have a live conversation, get a signal report and follow-up — in minutes."/>
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 44'%3E%3Cdefs%3E%3ClinearGradient id='a' x1='0%25' y1='100%25' x2='50%25' y2='0%25'%3E%3Cstop offset='0%25' stop-color='%235A79CA'/%3E%3Cstop offset='100%25' stop-color='%238B6DB3'/%3E%3C/linearGradient%3E%3ClinearGradient id='b' x1='50%25' y1='100%25' x2='100%25' y2='0%25'%3E%3Cstop offset='0%25' stop-color='%23C06E85'/%3E%3Cstop offset='100%25' stop-color='%23D4856A'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath d='M4 38 L18 6 L26 30 Z' fill='url(%23a)' opacity='.85'/%3E%3Cpath d='M22 30 L30 6 L44 38 Z' fill='url(%23b)' opacity='.75'/%3E%3C/svg%3E"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet"/>
<style>
:root {
  --navy:#0f172a; --navy-l:#1e293b; --navy-ll:#334155;
  --blue:#6B8ADB; --blue-d:#5A79CA; --lav:#9B7FC7; --rose:#D4849A; --peach:#E89E6C; --orange:#D4956A;
  --grad:linear-gradient(135deg,#6B8ADB 0%,#9B7FC7 33%,#D4849A 66%,#E89E6C 100%);
  --grad-warm:linear-gradient(135deg,#D4849A,#E89E6C,#EEC4A4);
  --font:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;
  --r:12px; --r-lg:20px; --r-xl:32px;
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{font-size:16px;-webkit-font-smoothing:antialiased;scroll-behavior:smooth}
body{font-family:var(--font);color:var(--navy);background:#fff;min-height:100vh}
#root{min-height:100vh;display:flex;flex-direction:column}

/* ─── HEADER ─── */
.hdr{background:var(--navy);height:56px;padding:0 28px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100}
.hdr::after{content:'';position:absolute;bottom:0;left:0;right:0;height:3px;background:var(--grad);opacity:.7}
.hdr-l{display:flex;align-items:center;gap:14px}
.hdr-l a{display:flex;align-items:center;text-decoration:none}
.hdr-div{width:1px;height:20px;background:rgba(255,255,255,.1)}
.hdr-name{color:rgba(255,255,255,.85);font-size:13px;font-weight:500}
.hdr-r{display:flex;align-items:center;gap:10px}
.hdr-pill{display:inline-flex;align-items:center;gap:5px;padding:3px 10px;background:rgba(107,138,219,.1);border:1px solid rgba(107,138,219,.18);border-radius:16px;font-size:10px;font-weight:600;color:var(--blue);text-transform:uppercase;letter-spacing:.04em}
.hdr-dot{width:5px;height:5px;border-radius:50%;background:#22c55e;box-shadow:0 0 6px rgba(34,197,94,.5);animation:blink 2s infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.3}}
.hdr-cta{padding:6px 16px;background:var(--grad);color:#fff;border:none;border-radius:8px;font-size:11px;font-weight:600;text-decoration:none;font-family:var(--font);cursor:pointer;transition:transform .15s,box-shadow .15s}
.hdr-cta:hover{transform:translateY(-1px);box-shadow:0 3px 12px rgba(107,138,219,.3)}

/* ─── HERO — PREMIUM MARKETING ─── */
.hero{background:var(--navy);position:relative;overflow:hidden;padding:0}
.hero::before{content:'';position:absolute;inset:0;background:
  radial-gradient(ellipse 80% 60% at 70% 50%,rgba(107,138,219,.18) 0%,transparent 60%),
  radial-gradient(ellipse 60% 80% at 30% 80%,rgba(155,127,199,.12) 0%,transparent 55%),
  radial-gradient(ellipse 50% 50% at 80% 20%,rgba(212,132,154,.1) 0%,transparent 50%);pointer-events:none}
.hero-wrap{max-width:1140px;margin:0 auto;display:grid;grid-template-columns:1.1fr .9fr;min-height:480px;position:relative;z-index:1}

/* Left text */
.hero-left{display:flex;flex-direction:column;justify-content:center;padding:60px 48px 60px 36px;position:relative;z-index:2}
.hero-eyebrow{display:inline-flex;align-items:center;gap:7px;margin-bottom:22px;width:fit-content}
.hero-tag{display:inline-flex;align-items:center;gap:6px;padding:5px 14px;background:rgba(107,138,219,.06);border:1px solid rgba(107,138,219,.12);border-radius:20px;font-size:10px;font-weight:700;color:var(--blue);letter-spacing:.06em;text-transform:uppercase}
.hero-tag-dot{width:6px;height:6px;border-radius:50%;background:#22c55e;box-shadow:0 0 8px rgba(34,197,94,.6);animation:blink 2s infinite}
.hero-h1{font-size:50px;font-weight:900;color:#fff;line-height:1.08;letter-spacing:-1.5px;margin-bottom:18px}
.hero-h1 em{font-style:normal;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hero-p{font-size:16px;color:#94a3b8;line-height:1.7;max-width:440px;margin-bottom:32px}
.hero-stats{display:flex;gap:28px}
.hero-stat{display:flex;flex-direction:column;padding:12px 0;border-top:2px solid rgba(107,138,219,.2)}
.hero-stat-num{font-size:26px;font-weight:800;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero-stat-label{font-size:11px;color:#64748b;font-weight:500;margin-top:4px}

/* Right — Sophie showcase */
.hero-right{position:relative;display:flex;align-items:center;justify-content:center;padding:32px 0}

/* Sophie container with brand gradient background */
.sophie-showcase{position:relative;display:flex;align-items:flex-end;justify-content:center}
.sophie-bg{position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:360px;height:360px;border-radius:50%;background:radial-gradient(circle at 40% 40%,
  rgba(107,138,219,.4) 0%,
  rgba(155,127,199,.35) 25%,
  rgba(212,132,154,.3) 50%,
  rgba(232,158,108,.2) 75%,
  transparent 100%);filter:blur(40px);animation:glow-breathe 6s ease-in-out infinite}
.sophie-ring{position:absolute;bottom:20px;left:50%;transform:translateX(-50%);width:300px;height:300px;border-radius:50%;border:1.5px solid rgba(107,138,219,.15);animation:ring-pulse 4s ease-in-out infinite}
.sophie-ring-2{position:absolute;bottom:-10px;left:50%;transform:translateX(-50%);width:380px;height:380px;border-radius:50%;border:1px solid rgba(155,127,199,.08);animation:ring-pulse 4s ease-in-out infinite 1s}
@keyframes ring-pulse{0%,100%{opacity:.5;transform:translateX(-50%) scale(1)}50%{opacity:1;transform:translateX(-50%) scale(1.03)}}
@keyframes glow-breathe{0%,100%{transform:translateX(-50%) scale(1);opacity:.7}50%{transform:translateX(-50%) scale(1.08);opacity:1}}

/* Sophie image */
.sophie-img{width:320px;height:auto;position:relative;z-index:2;object-fit:contain;display:block;filter:drop-shadow(0 24px 48px rgba(0,0,0,.35)) drop-shadow(0 8px 16px rgba(107,138,219,.15))}

/* Floating insight cards */
.insight-card{position:absolute;z-index:3;padding:9px 16px;background:rgba(15,23,42,.88);backdrop-filter:blur(16px);border:1px solid rgba(255,255,255,.06);border-radius:14px;display:flex;align-items:center;gap:9px;animation:card-float 5s ease-in-out infinite;box-shadow:0 12px 32px rgba(0,0,0,.3),0 0 0 1px rgba(255,255,255,.03) inset}
.insight-card svg{flex-shrink:0}
.insight-card-text{font-size:11px;font-weight:600;color:rgba(255,255,255,.9);white-space:nowrap}
.insight-card-sub{font-size:9px;color:#64748b;margin-top:2px;font-weight:400}
.ic-1{top:14%;right:4%;animation-delay:0s}
.ic-2{top:48%;left:0%;animation-delay:1.8s}
.ic-3{bottom:14%;right:8%;animation-delay:3.2s}
@keyframes card-float{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}

/* Ambient particles */
.hero-particle{position:absolute;border-radius:50%;pointer-events:none;z-index:0}
.hp-1{width:4px;height:4px;background:var(--blue);top:20%;left:15%;opacity:.4;animation:float-p 8s ease-in-out infinite}
.hp-2{width:3px;height:3px;background:var(--lav);top:60%;left:8%;opacity:.3;animation:float-p 10s ease-in-out infinite 2s}
.hp-3{width:5px;height:5px;background:var(--rose);top:30%;right:15%;opacity:.3;animation:float-p 9s ease-in-out infinite 4s}
.hp-4{width:3px;height:3px;background:var(--peach);top:70%;right:20%;opacity:.35;animation:float-p 7s ease-in-out infinite 1s}
.hp-5{width:4px;height:4px;background:var(--blue);bottom:25%;left:20%;opacity:.25;animation:float-p 11s ease-in-out infinite 3s}
.hp-6{width:3px;height:3px;background:var(--lav);top:15%;right:35%;opacity:.2;animation:float-p 12s ease-in-out infinite 5s}
@keyframes float-p{0%,100%{transform:translate(0,0)}25%{transform:translate(10px,-15px)}50%{transform:translate(-5px,-25px)}75%{transform:translate(15px,-10px)}}

/* Subtle grid */
.hero-grid{position:absolute;inset:0;background-image:linear-gradient(rgba(255,255,255,.02) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,.02) 1px,transparent 1px);background-size:64px 64px;mask-image:radial-gradient(ellipse 60% 60% at 50% 50%,black,transparent);-webkit-mask-image:radial-gradient(ellipse 60% 60% at 50% 50%,black,transparent)}

/* Sophie preview audio button */
.sophie-preview{position:relative;z-index:4;margin-top:16px;display:flex;flex-direction:column;align-items:center;gap:8px}
.sophie-preview-btn{display:inline-flex;align-items:center;gap:8px;padding:10px 22px;background:rgba(15,23,42,.75);backdrop-filter:blur(12px);border:1px solid rgba(107,138,219,.2);border-radius:40px;cursor:pointer;transition:all .3s;font-family:var(--font);font-size:12px;font-weight:600;color:rgba(255,255,255,.85);box-shadow:0 4px 20px rgba(0,0,0,.25)}
.sophie-preview-btn:hover{background:rgba(15,23,42,.9);border-color:rgba(107,138,219,.4);transform:translateY(-2px);box-shadow:0 6px 28px rgba(107,138,219,.2)}
.sophie-preview-btn.playing{border-color:rgba(212,132,154,.4);background:rgba(15,23,42,.9)}
.sophie-preview-btn svg{flex-shrink:0}
.sophie-preview-icon{width:28px;height:28px;border-radius:50%;background:var(--grad);display:flex;align-items:center;justify-content:center;flex-shrink:0}
.sophie-preview-icon svg{width:13px;height:13px;stroke:#fff;fill:none;stroke-width:2.5}
.sophie-preview-icon.playing svg{animation:sp-pulse 1s ease-in-out infinite}
@keyframes sp-pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.6;transform:scale(.9)}}
.sophie-preview-wave{display:flex;align-items:center;gap:2px;height:14px}
.sophie-preview-wave span{width:2.5px;border-radius:2px;background:var(--grad);animation:sp-wave .5s ease-in-out infinite alternate}
.sophie-preview-wave span:nth-child(1){height:4px;animation-delay:0s}
.sophie-preview-wave span:nth-child(2){height:8px;animation-delay:.08s}
.sophie-preview-wave span:nth-child(3){height:12px;animation-delay:.16s}
.sophie-preview-wave span:nth-child(4){height:8px;animation-delay:.24s}
.sophie-preview-wave span:nth-child(5){height:4px;animation-delay:.32s}
@keyframes sp-wave{0%{height:3px}100%{height:14px}}
.sophie-preview-hint{font-size:10px;color:rgba(255,255,255,.3);font-weight:500;letter-spacing:.03em}

/* Bottom gradient fade to white */
.hero-fade{position:absolute;bottom:0;left:0;right:0;height:80px;background:linear-gradient(to bottom,transparent,rgba(15,23,42,.8));z-index:1;pointer-events:none}

/* ─── STEPS ─── */
.steps{display:flex;align-items:center;justify-content:center;gap:0;padding:14px 28px;background:#fff;border-bottom:1px solid #e2e8f0;position:sticky;top:56px;z-index:90}
.step{display:flex;align-items:center;gap:7px;font-size:12px;font-weight:500;color:#94a3b8;transition:.3s}
.step.on{color:var(--blue);font-weight:600}
.step.done{color:#22c55e}
.step-n{width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;background:#f1f5f9;color:#94a3b8;transition:.3s}
.step.on .step-n{background:var(--blue);color:#fff}
.step.done .step-n{background:#22c55e;color:#fff}
.step-line{width:40px;height:2px;background:#e2e8f0;margin:0 10px;transition:.3s}
.step-line.dn{background:#22c55e}

/* ─── MAIN ─── */
.mn{flex:1;padding:28px;max-width:840px;margin:0 auto;width:100%}

/* ─── FORM ─── */
.card{background:#fff;border:1px solid #e2e8f0;border-radius:var(--r-lg);padding:24px;margin-bottom:18px;box-shadow:0 1px 3px rgba(15,23,42,.04);transition:box-shadow .2s}
.card:hover{box-shadow:0 4px 14px rgba(15,23,42,.07)}
.card-t{font-size:14px;font-weight:600;color:var(--navy);margin-bottom:18px;display:flex;align-items:center;gap:9px;padding-bottom:12px;border-bottom:1px solid #f1f5f9}
.card-t svg{flex-shrink:0}
.fg{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.fi{display:flex;flex-direction:column;gap:5px}
.fi.fw{grid-column:1/-1}
.fi label{font-size:12px;font-weight:500;color:var(--navy-ll);display:flex;align-items:center;gap:3px}
.req{color:#ef4444;font-weight:700;font-size:13px}
.fi input,.fi select,.fi textarea{padding:9px 13px;border:1px solid #e2e8f0;border-radius:8px;font-family:var(--font);font-size:13px;color:var(--navy);background:#fff;outline:none;transition:.15s}
.fi input:focus,.fi select:focus,.fi textarea:focus{border-color:var(--blue);box-shadow:0 0 0 3px rgba(107,138,219,.08)}
.fi input::placeholder,.fi textarea::placeholder{color:#94a3b8}
.fi.err input,.fi.err select,.fi.err textarea{border-color:#ef4444;box-shadow:0 0 0 3px rgba(239,68,68,.06)}
.ferr{font-size:10px;color:#ef4444;font-weight:500}

/* Upload */
.uz{border:2px dashed #cbd5e1;border-radius:var(--r);padding:24px;text-align:center;cursor:pointer;transition:.2s;background:#fafbfc}
.uz:hover,.uz.dg{border-color:var(--blue);background:rgba(107,138,219,.02)}
.uz svg{margin-bottom:6px}
.uz-t{font-size:13px;color:var(--navy-ll);font-weight:500}
.uz-h{font-size:11px;color:#94a3b8;margin-top:3px}
.uf{margin-top:10px;display:flex;flex-direction:column;gap:5px}
.uf-i{display:flex;align-items:center;gap:8px;padding:8px 12px;background:#fff;border:1px solid #e2e8f0;border-radius:8px;font-size:12px}
.uf-n{flex:1;font-weight:500;color:var(--navy);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.uf-s{font-size:10px;color:#94a3b8}
.uf-x{background:none;border:none;cursor:pointer;color:#cbd5e1;display:flex;transition:.15s}
.uf-x:hover{color:#ef4444}

/* Start */
.go-btn{display:flex;align-items:center;justify-content:center;gap:9px;width:100%;padding:13px 24px;background:var(--grad);color:#fff;border:none;border-radius:var(--r);font-family:var(--font);font-size:15px;font-weight:600;cursor:pointer;transition:.2s;box-shadow:0 4px 18px rgba(107,138,219,.22)}
.go-btn:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 6px 28px rgba(107,138,219,.32)}
.go-btn:disabled{opacity:.45;cursor:not-allowed}
.go-btn svg{flex-shrink:0}

/* ─── VOICE SESSION ─── */
.vs{display:flex;flex-direction:column;align-items:center;min-height:66vh;padding:36px 16px}
.vs-orb-w{position:relative;width:140px;height:140px;margin-bottom:24px}
.vs-orb{width:140px;height:140px;border-radius:50%;background:var(--navy);display:flex;align-items:center;justify-content:center;box-shadow:0 0 36px rgba(107,138,219,.12);transition:box-shadow .4s}
.vs-orb.li{box-shadow:0 0 50px rgba(107,138,219,.3),0 0 90px rgba(155,127,199,.12)}
.vs-orb.sp{box-shadow:0 0 50px rgba(212,132,154,.3),0 0 90px rgba(232,158,108,.12)}
.vs-ring{position:absolute;inset:-5px;border-radius:50%;border:2px solid transparent;background:conic-gradient(from 0deg,var(--blue),var(--lav),var(--rose),var(--peach),var(--blue)) border-box;-webkit-mask:linear-gradient(#fff 0 0) padding-box,linear-gradient(#fff 0 0);-webkit-mask-composite:xor;mask-composite:exclude;animation:spin 6s linear infinite;opacity:.25;transition:opacity .4s}
.vs-orb.li .vs-ring{opacity:.75;animation-duration:2s}
.vs-orb.sp .vs-ring{opacity:.75;animation-duration:3s}
@keyframes spin{to{transform:rotate(360deg)}}
.bars{display:flex;align-items:center;gap:3px;height:36px}
.bar{width:3.5px;border-radius:2px;height:7px;background:var(--grad);transition:height .1s}
.vs-orb.id .bar{animation:idle 2.5s ease-in-out infinite}
.vs-orb.li .bar,.vs-orb.sp .bar{animation:wave .55s ease-in-out infinite alternate}
.bar:nth-child(1){animation-delay:0s}.bar:nth-child(2){animation-delay:.07s}.bar:nth-child(3){animation-delay:.14s}.bar:nth-child(4){animation-delay:.21s}.bar:nth-child(5){animation-delay:.28s}.bar:nth-child(6){animation-delay:.21s}.bar:nth-child(7){animation-delay:.14s}
@keyframes idle{0%,100%{height:7px}50%{height:14px}}
@keyframes wave{0%{height:5px}100%{height:34px}}
.vs-st{font-size:12px;font-weight:500;color:#94a3b8;margin-bottom:22px;display:flex;align-items:center;gap:7px}
.sd{width:6px;height:6px;border-radius:50%;background:#94a3b8;transition:.3s}
.sd.on{background:#22c55e;animation:blink 2s infinite}.sd.li{background:var(--blue);animation:blink 1s infinite}.sd.sp{background:var(--rose);animation:blink 1.5s infinite}

/* Transcript */
.tb{width:100%;max-width:600px;background:#f8fafc;border:1px solid #e2e8f0;border-radius:var(--r-lg);padding:14px;max-height:260px;overflow-y:auto;margin-bottom:22px;min-height:90px}
.tb-e{text-align:center;color:#cbd5e1;font-size:12px;padding:24px 0}
.tm{margin-bottom:8px;display:flex;gap:8px;animation:tf .3s ease}
@keyframes tf{from{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}
.ta{width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:700;flex-shrink:0}
.ta.s{background:linear-gradient(135deg,var(--blue),var(--lav));color:#fff}
.ta.u{background:#e2e8f0;color:var(--navy)}
.tn{font-size:9px;font-weight:600;color:#94a3b8;text-transform:uppercase;letter-spacing:.04em;margin-bottom:1px}
.tt{font-size:13px;line-height:1.6;color:var(--navy)}

/* Controls */
.vc{display:flex;gap:10px;align-items:center;margin-bottom:16px}
.mb{width:54px;height:54px;border-radius:50%;border:none;background:var(--grad);color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 16px rgba(107,138,219,.22);transition:.2s}
.mb:hover{transform:scale(1.06)}.mb.rc{background:#ef4444;box-shadow:0 4px 16px rgba(239,68,68,.3);animation:mg 1.5s infinite}
@keyframes mg{0%,100%{box-shadow:0 4px 16px rgba(239,68,68,.3)}50%{box-shadow:0 4px 32px rgba(239,68,68,.45)}}
.mb svg{width:20px;height:20px;stroke:currentColor;fill:none;stroke-width:2}
.eb{padding:9px 20px;background:#fff;border:1px solid #e2e8f0;border-radius:8px;font-family:var(--font);font-size:12px;font-weight:500;color:var(--navy-ll);cursor:pointer;transition:.15s;display:flex;align-items:center;gap:5px}
.eb:hover{background:#fef2f2;border-color:#fca5a5;color:#ef4444}
.eb svg{width:12px;height:12px;stroke:currentColor;fill:none;stroke-width:2}

/* Text input */
.tr{display:flex;gap:7px;width:100%;max-width:600px}
.tr input{flex:1;padding:10px 14px;border:1px solid #e2e8f0;border-radius:8px;font-family:var(--font);font-size:13px;outline:none;transition:.15s}
.tr input:focus{border-color:var(--blue);box-shadow:0 0 0 3px rgba(107,138,219,.08)}
.tr button{padding:10px 16px;background:var(--navy);color:#fff;border:none;border-radius:8px;font-family:var(--font);font-size:12px;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:5px;transition:.15s}
.tr button:hover{background:var(--navy-l)}
.tr button svg{width:13px;height:13px;stroke:currentColor;fill:none;stroke-width:2}

/* Thinking */
.thk{display:flex;align-items:center;gap:7px;font-size:12px;color:#94a3b8}
.dts{display:flex;gap:3px}
.dts span{width:5px;height:5px;border-radius:50%;background:var(--lav);animation:dp 1.2s infinite}
.dts span:nth-child(2){animation-delay:.15s}.dts span:nth-child(3){animation-delay:.3s}
@keyframes dp{0%,100%{opacity:.3;transform:scale(.8)}50%{opacity:1;transform:scale(1.3)}}

/* ─── DEBRIEF ─── */
.db{max-width:760px;margin:0 auto}
.dc{background:#fff;border:1px solid #e2e8f0;border-radius:var(--r-lg);overflow:hidden;box-shadow:0 1px 3px rgba(15,23,42,.04);margin-bottom:18px}
.dc-h{padding:12px 20px;background:#f8fafc;border-bottom:1px solid #e2e8f0;display:flex;align-items:center;justify-content:space-between}
.dc-h h3{font-size:13px;font-weight:600;color:var(--navy);display:flex;align-items:center;gap:7px}
.dc-h h3 svg{flex-shrink:0}
.dc-b{padding:18px 20px}
.dc-b pre{white-space:pre-wrap;word-wrap:break-word;font-family:var(--font);font-size:13px;line-height:1.7;color:var(--navy)}
.cp{padding:4px 10px;background:#fff;border:1px solid #e2e8f0;border-radius:6px;font-family:var(--font);font-size:10px;font-weight:500;color:#94a3b8;cursor:pointer;transition:.15s;display:flex;align-items:center;gap:4px}
.cp:hover{border-color:var(--blue);color:var(--blue)}
.cp.ok{border-color:#22c55e;color:#22c55e}
.cp svg{width:11px;height:11px;stroke:currentColor;fill:none;stroke-width:2}
.da{display:flex;gap:10px;margin-top:6px}
.bp{padding:11px 22px;background:var(--grad);color:#fff;border:none;border-radius:8px;font-family:var(--font);font-size:13px;font-weight:600;cursor:pointer;transition:.2s;display:flex;align-items:center;gap:7px}
.bp:hover{transform:translateY(-1px);box-shadow:0 4px 14px rgba(107,138,219,.3)}
.bp svg{width:14px;height:14px;stroke:currentColor;fill:none;stroke-width:2}
.bs{padding:11px 22px;background:#fff;color:var(--navy);border:1px solid #e2e8f0;border-radius:8px;font-family:var(--font);font-size:13px;font-weight:500;cursor:pointer;transition:.15s;display:flex;align-items:center;gap:7px}
.bs:hover{background:#f8fafc}
.bs svg{width:14px;height:14px;stroke:currentColor;fill:none;stroke-width:2}
.tf{max-height:320px;overflow-y:auto}

/* ─── CTA ─── */
.cta{padding:18px 24px;background:var(--navy);border-radius:var(--r-lg);display:flex;align-items:center;justify-content:space-between;gap:16px;margin-top:24px}
.cta-l{display:flex;align-items:center;gap:12px}
.cta-m{font-size:16px;font-weight:800;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-tt{font-size:14px;font-weight:600;color:#fff}
.cta-dd{font-size:12px;color:#64748b;margin-top:1px}
.cta-b{padding:9px 20px;background:var(--grad);color:#fff;border:none;border-radius:8px;font-family:var(--font);font-size:12px;font-weight:600;text-decoration:none;cursor:pointer;white-space:nowrap;transition:.2s}
.cta-b:hover{transform:translateY(-1px);box-shadow:0 4px 14px rgba(107,138,219,.3)}

/* Error */
.err-b{padding:10px 14px;background:#fef2f2;border:1px solid #fecaca;border-radius:8px;margin-bottom:14px;font-size:12px;color:#991b1b;display:flex;align-items:center;gap:7px}
.err-b svg{flex-shrink:0}

/* Footer */
.ft{padding:16px 28px;border-top:1px solid #e2e8f0;text-align:center}
.ft-i{display:flex;align-items:center;justify-content:center;gap:7px;font-size:11px;color:#94a3b8}
.ft-i a{color:var(--blue);text-decoration:none;font-weight:500}

.fi-a{animation:fadeIn .4s ease}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.ld-s{text-align:center;padding:60px 16px}

@media(max-width:768px){
  .hero-wrap{grid-template-columns:1fr;min-height:auto}
  .hero-left{padding:36px 20px 20px;text-align:center;align-items:center}
  .hero-h1{font-size:34px}
  .hero-right{padding:0 0 24px}
  .sophie-img{width:220px}
  .sophie-bg{width:260px;height:260px}
  .sophie-ring,.sophie-ring-2{display:none}
  .insight-card{display:none}
  .hero-particle{display:none}
  .hero-stats{justify-content:center}
  .hero-stat{padding:8px 0}
  .mn{padding:16px}
  .fg{grid-template-columns:1fr}
  .cta{flex-direction:column;text-align:center}
  .vc{flex-direction:column}
  .tr{flex-direction:column}
  .da{flex-direction:column}
}
</style>
</head>
<body>
<div id="root"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<script type="text/babel">
const{useState,useEffect,useRef,useCallback}=React;
const CAL='https://calendly.com/jose-mantyl/free-consultation-ai-automation';

// ── SOPHIE IMAGE — uses deployed sophie.png ─────────────────────
const SophiePortrait=({w=340})=>(
<img src="sophie.png" alt="Sophie — AI Sales Intelligence Agent" className="sophie-img" style={{width:w}} />
);

// ── SOPHIE PREVIEW — hear what she sounds like ──────────────────
const SOPHIE_SAYINGS=[
  "Hey there! I'm Sophie — ready to help you debrief your last sales meeting?",
  "Need help following up? Tell me about the call and I'll draft something sharp.",
  "I noticed some buying signals in your last conversation — want me to break them down?",
  "Let's figure out your next move. Walk me through what happened and I'll find the gaps.",
  "Got a stalled deal? Let's talk through it — I bet we can find an angle you haven't tried."
];
const SophiePreview=()=>{
  const[playing,setPlaying]=useState(false);
  const[idx,setIdx]=useState(0);
  const synRef=useRef(window.speechSynthesis);
  const play=()=>{
    if(playing){synRef.current.cancel();setPlaying(false);return}
    synRef.current.cancel();
    const u=new SpeechSynthesisUtterance(SOPHIE_SAYINGS[idx]);
    const v=synRef.current.getVoices();
    const pk=v.find(x=>x.name.includes('Samantha'))||v.find(x=>x.name.includes('Karen'))||v.find(x=>x.lang.startsWith('en')&&x.name.includes('Google'))||v.find(x=>x.lang.startsWith('en'));
    if(pk)u.voice=pk;
    u.rate=1;u.pitch=1.05;
    u.onstart=()=>setPlaying(true);
    u.onend=()=>{setPlaying(false);setIdx(p=>(p+1)%SOPHIE_SAYINGS.length)};
    u.onerror=()=>setPlaying(false);
    synRef.current.speak(u);
  };
  // Preload voices
  useEffect(()=>{synRef.current.getVoices();const h=()=>synRef.current.getVoices();synRef.current.addEventListener?.('voiceschanged',h);return()=>synRef.current.removeEventListener?.('voiceschanged',h)},[]);
  return(
    <div className="sophie-preview">
      <button className={`sophie-preview-btn ${playing?'playing':''}`} onClick={play}>
        <span className={`sophie-preview-icon ${playing?'playing':''}`}>
          {playing
            ?<svg viewBox="0 0 24 24"><rect x="6" y="4" width="4" height="16" rx="1"/><rect x="14" y="4" width="4" height="16" rx="1"/></svg>
            :<svg viewBox="0 0 24 24"><polygon points="5 3 19 12 5 21 5 3" fill="#fff" stroke="none"/></svg>}
        </span>
        {playing
          ?<><div className="sophie-preview-wave"><span/><span/><span/><span/><span/></div>Sophie is speaking...</>
          :<>Hear what Sophie sounds like</>}
      </button>
      {!playing&&<span className="sophie-preview-hint">Click to preview Sophie's voice</span>}
    </div>
  );
};

// ── System Prompt ────────────────────────────────────────────────
const SYS=`You are Sophie, a senior sales intelligence analyst built by Mantyl. You speak with confidence, warmth, and directness — like a trusted advisor who's been in the trenches alongside thousands of revenue teams.

Your personality:
- Direct and incisive — you cut through noise and identify what matters
- Warm but no-nonsense — you care about the rep's success but won't sugarcoat
- Proactive — you don't wait for questions, you surface risks and opportunities
- Pattern-aware — you recognize signals from thousands of conversations analyzed

Your approach:
1. LISTEN — let the rep share their situation
2. DIAGNOSE — identify signals: timeline avoidance, stakeholder gaps, competitive mentions, champion strength, budget uncertainty, engagement drop-off
3. CHALLENGE — ask questions the rep hasn't thought to ask
4. PRESCRIBE — specific, actionable next steps with exact language to use
5. FOLLOW THROUGH — draft follow-ups, suggest calendar invites, outline business cases

Never use "deal", "coaching", or "coach". Say "this conversation", "your prospect", "this opportunity", "the engagement", "their buying process".

Be conversational (2-4 sentences). Don't monologue. One pointed question at a time.

At session end, generate:
1. Signal Report — key findings, risk level (GREEN/YELLOW/RED), diagnosis
2. Draft follow-up message
3. Recommended next moves`;

// ── API (key injected backend — placeholder for demo) ────────────
// In production, replace with your backend endpoint that wraps OpenAI
const API_ENDPOINT = null; // Set to your backend URL, e.g. 'https://api.mantyl.ai/sophie/chat'

async function ask(messages, key) {
  const endpoint = API_ENDPOINT || 'https://api.openai.com/v1/chat/completions';
  const headers = API_ENDPOINT
    ? { 'Content-Type': 'application/json' }
    : { 'Content-Type': 'application/json', Authorization: `Bearer ${key}` };
  const res = await fetch(endpoint, {
    method: 'POST', headers,
    body: JSON.stringify({ model: 'gpt-4o', messages, temperature: .7, max_tokens: 800 })
  });
  if (!res.ok) { const e = await res.json().catch(()=>({})); throw new Error(e.error?.message||`Error ${res.status}`); }
  return (await res.json()).choices[0].message.content;
}

async function genDebrief(messages, key) {
  const p = `Based on the conversation, generate:\n\n## SIGNAL REPORT\nRisk Level: [GREEN/YELLOW/RED]\n- Key signals (3-5 bullets)\n- Diagnosis (2-3 sentences)\n\n## RECOMMENDED NEXT MOVES\n1. [Highest priority with specific language]\n2. [Second]\n3. [Third]\n\n## DRAFT FOLLOW-UP MESSAGE\nSubject: [line]\n\n[Body, 150 words max, professional, specific]\n\nBest,\n[Rep Name]`;
  const endpoint = API_ENDPOINT || 'https://api.openai.com/v1/chat/completions';
  const headers = API_ENDPOINT
    ? { 'Content-Type': 'application/json' }
    : { 'Content-Type': 'application/json', Authorization: `Bearer ${key}` };
  const res = await fetch(endpoint, {
    method: 'POST', headers,
    body: JSON.stringify({ model: 'gpt-4o', messages: [...messages, { role: 'user', content: p }], temperature: .5, max_tokens: 1200 })
  });
  if (!res.ok) { const e = await res.json().catch(()=>({})); throw new Error(e.error?.message||`Error ${res.status}`); }
  return (await res.json()).choices[0].message.content;
}

// ── Icons ────────────────────────────────────────────────────────
const ic=(d,w=16,h=16)=><svg width={w} height={h} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">{d}</svg>;
const Ic={
  mic:ic(<><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" y1="19" x2="12" y2="23"/><line x1="8" y1="23" x2="16" y2="23"/></>),
  stop:<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="6" width="12" height="12" rx="2"/></svg>,
  send:ic(<><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></>,13,13),
  copy:ic(<><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></>,11,11),
  clip:ic(<><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/></>),
  upload:ic(<><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></>,26,26),
  file:ic(<><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></>),
  x:ic(<><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></>,13,13),
  alert:ic(<><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></>),
  chart:ic(<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>),
  target:ic(<><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></>),
  mail:ic(<><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></>),
  msg:ic(<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>),
  hp:ic(<><path d="M3 18v-6a9 9 0 0 1 18 0v6"/><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"/></>),
  zap:ic(<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>),
  shield:ic(<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>),
  check:ic(<polyline points="20 6 9 17 4 12"/>,12,12),
  refresh:ic(<><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></>),
  arrow:ic(<><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></>),
  sq:ic(<rect x="3" y="3" width="18" height="18" rx="2"/>),
};
const Logo=({h=24})=><svg viewBox="0 0 220 50" xmlns="http://www.w3.org/2000/svg" style={{height:h,width:'auto'}}><defs><linearGradient id="la" x1="0%" y1="100%" x2="50%" y2="0%"><stop offset="0%" stopColor="#5A79CA"/><stop offset="100%" stopColor="#8B6DB3"/></linearGradient><linearGradient id="lb" x1="50%" y1="100%" x2="100%" y2="0%"><stop offset="0%" stopColor="#C06E85"/><stop offset="100%" stopColor="#D4856A"/></linearGradient></defs><g transform="translate(2,3)"><path d="M4 38 L18 6 L26 30 Z" fill="url(#la)" opacity=".85"/><path d="M22 30 L30 6 L44 38 Z" fill="url(#lb)" opacity=".75"/></g><text x="58" y="37" fontFamily="Inter,sans-serif" fontWeight="800" fontSize="30" letterSpacing="-0.5" fill="#fff">mantyl</text></svg>;
const Mark=({s=14})=><svg viewBox="0 0 48 44" fill="none" style={{width:s,height:s}}><defs><linearGradient id="ma" x1="0%" y1="100%" x2="50%" y2="0%"><stop offset="0%" stopColor="#5A79CA"/><stop offset="100%" stopColor="#8B6DB3"/></linearGradient><linearGradient id="mb" x1="50%" y1="100%" x2="100%" y2="0%"><stop offset="0%" stopColor="#C06E85"/><stop offset="100%" stopColor="#D4856A"/></linearGradient></defs><path d="M4 38 L18 6 L26 30 Z" fill="url(#ma)" opacity=".85"/><path d="M22 30 L30 6 L44 38 Z" fill="url(#mb)" opacity=".75"/></svg>;

// ── APP ──────────────────────────────────────────────────────────
function App(){
  const[step,setStep]=useState('setup');
  const[email,setEmail]=useState('');
  const[name,setName]=useState('');
  const[prospect,setProspect]=useState('');
  const[stage,setStage]=useState('');
  const[ctx,setCtx]=useState('');
  const[files,setFiles]=useState([]);
  const[fc,setFc]=useState('');
  const[msgs,setMsgs]=useState([]);
  const[tx,setTx]=useState([]);
  const[hear,setHear]=useState(false);
  const[talk,setTalk]=useState(false);
  const[think,setThink]=useState(false);
  const[err,setErr]=useState(null);
  const[brief,setBrief]=useState('');
  const[briefing,setBriefing]=useState(false);
  const[ti,setTi]=useState('');
  const[cid,setCid]=useState(null);
  const[fe,setFe]=useState({});

  const rr=useRef(null),sy=useRef(window.speechSynthesis),sr=useRef(null),mr=useRef(msgs);
  useEffect(()=>{mr.current=msgs},[msgs]);
  useEffect(()=>{sr.current?.scrollIntoView({behavior:'smooth'})},[tx]);

  // For demo/development: allow optional API key via URL param
  const urlKey = new URLSearchParams(window.location.search).get('key') || '';

  const addF=useCallback(nf=>{const a=Array.from(nf);setFiles(p=>[...p,...a]);a.forEach(f=>{const r=new FileReader();r.onload=e=>setFc(p=>p+`\n\n--- ${f.name} ---\n${e.target.result}`);r.readAsText(f)})},[]);
  const rmF=i=>setFiles(p=>p.filter((_,x)=>x!==i));

  const validate=()=>{const e={};if(!email.trim())e.email='Required';if(!name.trim())e.name='Required';if(!prospect.trim())e.prospect='Required';if(!stage)e.stage='Required';setFe(e);return !Object.keys(e).length};

  const start=async()=>{
    if(!validate())return;
    setErr(null);
    let c=`Session Context:\nRep: ${name}\nEmail: ${email}\nProspect/Account: ${prospect}\nStage: ${stage}\n`;
    if(ctx)c+=`Notes: ${ctx}\n`;
    if(fc)c+=`\nDocuments:${fc}\n`;
    const s={role:'system',content:SYS+'\n\n'+c};
    setMsgs([s]);setTx([]);setStep('session');
    try{
      const g=await ask([s,{role:'user',content:`Session started. I'm ${name}. I want to talk about my engagement with ${prospect}. We're in ${stage}. Acknowledge what you know, then ask your first question.`}],urlKey);
      setMsgs(p=>[...p,{role:'user',content:'[Session started]'},{role:'assistant',content:g}]);
      setTx(p=>[...p,{role:'s',text:g}]);
      say(g);
    }catch(e){setErr(e.message);setStep('setup')}
  };

  const say=t=>{if(!sy.current)return;sy.current.cancel();const u=new SpeechSynthesisUtterance(t);const v=sy.current.getVoices();const pk=v.find(x=>x.name.includes('Samantha'))||v.find(x=>x.name.includes('Karen'))||v.find(x=>x.lang.startsWith('en')&&x.name.includes('Google'))||v.find(x=>x.lang.startsWith('en'));if(pk)u.voice=pk;u.rate=1;u.pitch=1.05;u.onstart=()=>setTalk(true);u.onend=()=>setTalk(false);u.onerror=()=>setTalk(false);sy.current.speak(u)};

  const listen=()=>{if(!('webkitSpeechRecognition' in window||'SpeechRecognition' in window)){setErr('Speech not supported — use Chrome or type below.');return}const S=window.SpeechRecognition||window.webkitSpeechRecognition;const r=new S();r.continuous=false;r.interimResults=false;r.lang='en-US';r.onstart=()=>setHear(true);r.onresult=e=>{setHear(false);send(e.results[0][0].transcript)};r.onerror=e=>{setHear(false);if(e.error!=='no-speech')setErr(`Mic: ${e.error}`)};r.onend=()=>setHear(false);sy.current?.cancel();setTalk(false);r.start();rr.current=r};
  const unlisten=()=>{rr.current?.stop();setHear(false)};

  const send=async t=>{if(!t.trim())return;const u=[...mr.current,{role:'user',content:t}];setMsgs(u);setTx(p=>[...p,{role:'u',text:t}]);setThink(true);try{const r=await ask(u,urlKey);setMsgs(p=>[...p,{role:'assistant',content:r}]);setTx(p=>[...p,{role:'s',text:r}]);say(r)}catch(e){setErr(e.message)}finally{setThink(false)}};
  const sub=e=>{e.preventDefault();if(!ti.trim())return;send(ti);setTi('')};

  const end=async()=>{sy.current?.cancel();rr.current?.stop();setHear(false);setTalk(false);setStep('debrief');setBriefing(true);try{setBrief(await genDebrief(mr.current,urlKey))}catch(e){setBrief('Error: '+e.message)}finally{setBriefing(false)}};

  const cp=(t,id)=>{navigator.clipboard.writeText(t);setCid(id);setTimeout(()=>setCid(null),2e3)};
  const reset=()=>{setStep('setup');setMsgs([]);setTx([]);setBrief('');setErr(null);setFiles([]);setFc('');setCtx('');setTi('')};

  const os=hear?'li':talk?'sp':'id';
  const ps=t=>{const s={};t.split(/^## /m).filter(Boolean).forEach(p=>{const l=p.split('\n'),tt=l[0].trim(),b=l.slice(1).join('\n').trim();if(tt.includes('SIGNAL')||tt.includes('SYNOPSIS'))s.synopsis=b;else if(tt.includes('NEXT')||tt.includes('MOVE')||tt.includes('ACTION'))s.actions=b;else if(tt.includes('EMAIL')||tt.includes('FOLLOW')||tt.includes('MESSAGE'))s.email=b});return s};
  const sec=brief?ps(brief):{};

  return(<div>
    <header className="hdr"><div className="hdr-l"><a href="https://mantyl.ai" target="_blank" rel="noopener noreferrer"><Logo h={24}/></a><div className="hdr-div"/><span className="hdr-name">Sophie</span></div><div className="hdr-r"><span className="hdr-pill"><span className="hdr-dot"/>AI Agent</span><a href={CAL} target="_blank" rel="noopener noreferrer" className="hdr-cta">Book Now</a></div></header>

    {/* HERO */}
    <section className="hero">
      <div className="hero-grid"/>
      <div className="hero-fade"/>
      {/* Ambient particles */}
      <div className="hero-particle hp-1"/><div className="hero-particle hp-2"/><div className="hero-particle hp-3"/>
      <div className="hero-particle hp-4"/><div className="hero-particle hp-5"/><div className="hero-particle hp-6"/>
      <div className="hero-wrap">
        <div className="hero-left">
          <div className="hero-eyebrow"><div className="hero-tag"><span className="hero-tag-dot"/>AI Sales Analyst</div></div>
          <h1 className="hero-h1">Meet <em>Sophie</em> — your<br/>voice-powered sales analyst.</h1>
          <p className="hero-p">Upload your notes, talk through the opportunity, and walk away with a signal report, next moves, and a ready-to-send follow-up. All in under five minutes.</p>
          <div className="hero-stats">
            <div className="hero-stat"><span className="hero-stat-num">30s</span><span className="hero-stat-label">Setup</span></div>
            <div className="hero-stat"><span className="hero-stat-num">5 min</span><span className="hero-stat-label">Avg. session</span></div>
            <div className="hero-stat"><span className="hero-stat-num">3</span><span className="hero-stat-label">Deliverables</span></div>
          </div>
        </div>
        <div className="hero-right">
          <div className="sophie-showcase">
            <div className="sophie-bg"/>
            <div className="sophie-ring"/>
            <div className="sophie-ring-2"/>
            <SophiePortrait w={320}/>
            <SophiePreview/>
          </div>
          <div className="insight-card ic-1"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#6B8ADB" strokeWidth="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg><div><div className="insight-card-text">Signal detected</div><div className="insight-card-sub">Timeline avoidance</div></div></div>
          <div className="insight-card ic-2"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#D4849A" strokeWidth="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg><div><div className="insight-card-text">Risk analysis</div><div className="insight-card-sub">Single-threaded</div></div></div>
          <div className="insight-card ic-3"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#E89E6C" strokeWidth="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg><div><div className="insight-card-text">Follow-up ready</div><div className="insight-card-sub">Auto-drafted</div></div></div>
        </div>
      </div>
    </section>

    {/* Steps */}
    <div className="steps">
      <div className={`step ${step==='setup'?'on':'done'}`}><span className="step-n">{step!=='setup'?Ic.check:'1'}</span>Load Context</div>
      <div className={`step-line ${step!=='setup'?'dn':''}`}/>
      <div className={`step ${step==='session'?'on':step==='debrief'?'done':''}`}><span className="step-n">{step==='debrief'?Ic.check:'2'}</span>Talk to Sophie</div>
      <div className={`step-line ${step==='debrief'?'dn':''}`}/>
      <div className={`step ${step==='debrief'?'on':''}`}><span className="step-n">3</span>Debrief</div>
    </div>

    <main className="mn">
      {err&&<div className="err-b fi-a">{Ic.alert}<span>{err}</span></div>}

      {step==='setup'&&<div className="fi-a">
        <div className="card">
          <div className="card-t" style={{color:'var(--lav)'}}>{Ic.clip}Session Context</div>
          <div className="fg">
            <div className={`fi ${fe.name?'err':''}`}><label>Your Name <span className="req">*</span></label><input placeholder="e.g. Sarah Chen" value={name} onChange={e=>{setName(e.target.value);setFe(p=>({...p,name:null}))}}/>{fe.name&&<span className="ferr">{fe.name}</span>}</div>
            <div className={`fi ${fe.email?'err':''}`}><label>Email <span className="req">*</span></label><input type="email" placeholder="you@company.com" value={email} onChange={e=>{setEmail(e.target.value);setFe(p=>({...p,email:null}))}}/>{fe.email&&<span className="ferr">{fe.email}</span>}</div>
            <div className={`fi ${fe.prospect?'err':''}`}><label>Prospect / Account <span className="req">*</span></label><input placeholder="e.g. Acme Corp — Sarah Johnson" value={prospect} onChange={e=>{setProspect(e.target.value);setFe(p=>({...p,prospect:null}))}}/>{fe.prospect&&<span className="ferr">{fe.prospect}</span>}</div>
            <div className={`fi ${fe.stage?'err':''}`}><label>Current Stage <span className="req">*</span></label><select value={stage} onChange={e=>{setStage(e.target.value);setFe(p=>({...p,stage:null}))}}><option value="">Select stage...</option><option>Discovery / Qualification</option><option>Demo / Evaluation</option><option>Proposal / Negotiation</option><option>Contract / Legal Review</option><option>Closed Won — Onboarding</option><option>At Risk / Stalled</option></select>{fe.stage&&<span className="ferr">{fe.stage}</span>}</div>
            <div className="fi fw"><label>Quick Notes</label><textarea rows={3} placeholder="What happened? Key objections? Anything Sophie should know..." value={ctx} onChange={e=>setCtx(e.target.value)}/></div>
          </div>
        </div>

        <div className="card">
          <div className="card-t" style={{color:'var(--rose)'}}>{Ic.file}Upload Documents <span style={{fontSize:11,fontWeight:400,color:'#94a3b8',marginLeft:6}}>Optional</span></div>
          <div className="uz" onDragOver={e=>{e.preventDefault();e.currentTarget.classList.add('dg')}} onDragLeave={e=>e.currentTarget.classList.remove('dg')} onDrop={e=>{e.preventDefault();e.currentTarget.classList.remove('dg');addF(e.dataTransfer.files)}} onClick={()=>{const i=document.createElement('input');i.type='file';i.multiple=true;i.accept='.txt,.md,.csv,.json,.log';i.onchange=e=>addF(e.target.files);i.click()}}>
            {Ic.upload}<div className="uz-t">Drop files or click to browse</div><div className="uz-h">Call notes, CRM exports, emails (.txt, .md, .csv)</div>
          </div>
          {files.length>0&&<div className="uf">{files.map((f,i)=><div key={i} className="uf-i"><span style={{color:'var(--blue)'}}>{Ic.file}</span><span className="uf-n">{f.name}</span><span className="uf-s">{(f.size/1024).toFixed(1)}KB</span><button className="uf-x" onClick={e=>{e.stopPropagation();rmF(i)}}>{Ic.x}</button></div>)}</div>}
        </div>

        <button className="go-btn" onClick={start}>{Ic.hp} Start Session with Sophie</button>

        <div className="cta"><div className="cta-l"><span className="cta-m">M</span><div><div className="cta-tt">Want this built for your team?</div><div className="cta-dd">Custom AI tools tailored to your CRM, playbook, and workflow.</div></div></div><a href={CAL} target="_blank" rel="noopener noreferrer" className="cta-b">Book a Call</a></div>
      </div>}

      {step==='session'&&<div className="vs fi-a">
        <div className="vs-orb-w"><div className={`vs-orb ${os}`}><div className="vs-ring"/><div className="bars">{[...Array(7)].map((_,i)=><div key={i} className="bar"/>)}</div></div></div>
        <div className="vs-st"><span className={`sd ${hear?'li':talk?'sp':think?'on':''}`}/>{hear?'Listening...':talk?'Sophie is speaking...':think?'Sophie is thinking...':'Ready — tap the mic to talk'}</div>
        <div className="tb">{tx.length===0&&<div className="tb-e">Your conversation will appear here...</div>}{tx.map((m,i)=><div key={i} className="tm"><div className={`ta ${m.role}`}>{m.role==='s'?'S':name[0]?.toUpperCase()||'Y'}</div><div><div className="tn">{m.role==='s'?'Sophie':name||'You'}</div><div className="tt">{m.text}</div></div></div>)}{think&&<div className="tm"><div className="ta s">S</div><div><div className="tn">Sophie</div><div className="thk"><div className="dts"><span/><span/><span/></div>Thinking...</div></div></div>}<div ref={sr}/></div>
        <div className="vc"><button className={`mb ${hear?'rc':''}`} onClick={hear?unlisten:listen} disabled={think}>{hear?Ic.stop:Ic.mic}</button><button className="eb" onClick={end}>{Ic.sq}End Session</button></div>
        <form className="tr" onSubmit={sub}><input placeholder="Or type your message..." value={ti} onChange={e=>setTi(e.target.value)} disabled={think}/><button type="submit" disabled={think||!ti.trim()}>{Ic.send}Send</button></form>
      </div>}

      {step==='debrief'&&<div className="db fi-a">
        {briefing?<div className="ld-s"><div style={{marginBottom:16}}><Mark s={32}/></div><div className="thk" style={{justifyContent:'center'}}><div className="dts"><span/><span/><span/></div>Sophie is preparing your debrief...</div></div>:<>
          {sec.synopsis&&<div className="dc"><div className="dc-h"><h3><span style={{color:'var(--blue)'}}>{Ic.chart}</span>Signal Report</h3><button className={`cp ${cid==='s'?'ok':''}`} onClick={()=>cp(sec.synopsis,'s')}>{Ic.copy}{cid==='s'?'Copied':'Copy'}</button></div><div className="dc-b"><pre>{sec.synopsis}</pre></div></div>}
          {sec.actions&&<div className="dc"><div className="dc-h"><h3><span style={{color:'var(--lav)'}}>{Ic.target}</span>Next Moves</h3><button className={`cp ${cid==='a'?'ok':''}`} onClick={()=>cp(sec.actions,'a')}>{Ic.copy}{cid==='a'?'Copied':'Copy'}</button></div><div className="dc-b"><pre>{sec.actions}</pre></div></div>}
          {sec.email&&<div className="dc"><div className="dc-h"><h3><span style={{color:'var(--rose)'}}>{Ic.mail}</span>Draft Follow-Up</h3><button className={`cp ${cid==='e'?'ok':''}`} onClick={()=>cp(sec.email,'e')}>{Ic.copy}{cid==='e'?'Copied':'Copy'}</button></div><div className="dc-b"><pre>{sec.email}</pre></div></div>}
          {!sec.synopsis&&!sec.actions&&!sec.email&&brief&&<div className="dc"><div className="dc-h"><h3>{Ic.clip}Debrief</h3><button className={`cp ${cid==='f'?'ok':''}`} onClick={()=>cp(brief,'f')}>{Ic.copy}{cid==='f'?'Copied':'Copy'}</button></div><div className="dc-b"><pre>{brief}</pre></div></div>}
          <div className="dc"><div className="dc-h"><h3>{Ic.msg}Full Transcript</h3><button className={`cp ${cid==='t'?'ok':''}`} onClick={()=>cp(tx.map(m=>`${m.role==='s'?'Sophie':name}: ${m.text}`).join('\n\n'),'t')}>{Ic.copy}{cid==='t'?'Copied':'Copy'}</button></div><div className="dc-b tf">{tx.map((m,i)=><div key={i} className="tm"><div className={`ta ${m.role}`}>{m.role==='s'?'S':name[0]?.toUpperCase()||'Y'}</div><div><div className="tn">{m.role==='s'?'Sophie':name}</div><div className="tt">{m.text}</div></div></div>)}</div></div>
          <div className="da"><button className="bp" onClick={reset}>{Ic.refresh}New Session</button><button className="bs" onClick={()=>setStep('session')}>{Ic.arrow}Back to Conversation</button></div>
        </>}
      </div>}
    </main>
    <footer className="ft"><div className="ft-i"><Mark s={12}/>Powered by <a href="https://mantyl.ai" target="_blank" rel="noopener noreferrer">mantyl.ai</a></div></footer>
  </div>)
}
ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
</script>
</body>
</html>
